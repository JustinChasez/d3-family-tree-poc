<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">

<style type="text/css">
    body {
        font: 10px sans-serif;
    }

    .linage {
        fill: none;
        stroke: #000;
    }

    .marriage {
        fill: none;
        stroke: black;
    }

    .man {
        background-color: lightblue;
        border-style: solid;
        border-width: 1px;
        box-sizing: border-box;
    }

    .woman {
        background-color: pink;
        border-style: solid;
        border-width: 1px;
        box-sizing: border-box;
    }

    .emphasis {
        font-style: italic;
    }

    p {
        padding: 0;
        margin: 0;
    }

    svg {
        border-style: solid;
        border-width: 1px;
    }

    foreignObject {
        cursor: pointer;
    }

    foreignObject div {
        width: 100px;
        height: 100px;
    }
</style>

<script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="dtree.js"></script>
<body>
<h1>Demo</h1>
<div id="graph"></div>

<script>
    const treeData = [
        {
            "name": "Grandmother",
            "class": "woman",
            "textClass": "emphasis",
            "marriages": [
                {
                    "spouse": {
                        "name": "Grandfather",
                        "class": "man",
                        "extra": {
                            "nickname": "Illi"
                        }
                    },
                    "children": [
                        // {
                        //     "name": "Aunt",
                        //     "class": "woman",
                        //     "marriages": [
                        //         {
                        //             "spouse": {
                        //                 "name": "Aunt's Husband",
                        //                 "class": "man"
                        //             },
                        //             "children": [
                        //                 {
                        //                     "name": "Patient's cousin",
                        //                     "class": "woman"
                        //                 },
                        //                 {
                        //                     "name": "Patient's cousin 6",
                        //                     "class": "woman"
                        //                 }
                        //             ]
                        //         }
                        //     ]
                        // },
                        {
                            "name": "Mother",
                            "class": "woman",
                            "marriages": [
                                // {
                                //     "spouse": {
                                //         "name": "Divorced Husband",
                                //         "class": "man",
                                //         "id": 22
                                //     },
                                //     "children": [
                                //         {
                                //             "name": "Half Sister",
                                //             "class": "woman"
                                //         }
                                //     ]
                                // },
                                {
                                    "spouse": {
                                        "name": "Father",
                                        "class": "man",
                                        "id": 200
                                    },
                                    "children": [
                                        {
                                            "name": "Patient Node",
                                            "class": "woman",
                                            "age": 20
                                        },
                                        {
                                            "name": "Patient Elder Sister",
                                            "class": "woman",
                                            "age": 21
                                        },
                                        {
                                            "name": "Patient Younger Sister",
                                            "class": "woman",
                                            "age": 17
                                        }
                                    ]
                                }
                            ]
                        },
                        // {
                        //     "name": "Aunt 2",
                        //     "class": "woman",
                        //     "marriages": [
                        //         {
                        //             "spouse": {
                        //                 "name": "Aunt 2's Husband",
                        //                 "class": "man"
                        //             },
                        //             "children": [
                        //                 {
                        //                     "name": "Patient's cousin 2",
                        //                     "class": "woman"
                        //                 },
                        //                 {
                        //                     "name": "Patient's cousin 3",
                        //                     "class": "woman"
                        //                 },
                        //                 {
                        //                     "name": "Patient's cousin 4",
                        //                     "class": "woman"
                        //                 },
                        //                 {
                        //                     "name": "Patient's cousin 5",
                        //                     "class": "woman"
                        //                 }
                        //             ]
                        //         }
                        //     ]
                        // }
                    ]
                }
            ],
            "extra": {
                "profileImg": "some profile link here",
                "hasBRCA": true,
                "BRCATest": {
                    "date": "2020-03-07",
                    "result": "negative"
                }
            }
        },

        {
            "name": "Paternal Grandmother",
            "class": "woman",
            "marriages": [
                {
                    "spouse": {
                        "name": "Paternal Grandfather",
                        "class": "man"
                    },
                    "children": [
                        {
                            "name": "Father",
                            "class": "man",
                            "id": 200
                        }
                    ]
                }
            ]
        },
    ];

    dTree.init(treeData,
        {
            target: "#graph",
            debug: true,
            height: 800,
            width: 1200,
            callbacks: {
                nodeClick: function (name, extra, nodeId) {
                    console.log('click: ', name, extra, nodeId);
                },
                nodeRightClick: function (name, extra, nodeId) {
                    console.log('right click: ', name, extra, nodeId);
                }
            }
        });
</script>
</body>
</html>
